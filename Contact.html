<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contact Us - Lush Crete</title>
    <meta name="description" content="Get in touch with Lush Crete in Adelaide for a free quote on your next concrete project.">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@700&family=Montserrat:wght@700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* ==========================================================================
           1) DESIGN SYSTEM & ROOT VARIABLES
           ========================================================================== */
        :root {
            --background: #FFFFFF;
            --surface: #F9F9F9;
            --text-primary: #111111;
            --text-secondary: #555555;
            --line: #EAEAEA;
            --accent: #B08D57; /* Gold */

            /* === COLOR VARS (Added/Updated) === */
            --accent-teal: #0D7377; /* Kept for nav underline & footer gradient */
            --accent-blue: #2A629A; /* Blue for headers & hovers */
            --accent-light-blue: #ADD8E6; /* Added light blue for gradient */
            --accent-teal-light: #F0F9F8;
            /* === END COLOR VARS === */

            /* === FONT CHANGE === */
            --font-main: 'Poppins', sans-serif;
            --font-display: 'Montserrat', sans-serif; /* Was 'Inter' */
            /* === END FONT CHANGE === */
            --font-display-alt: 'Inter', sans-serif;
            --font-size-base: 16px;
            --line-height-base: 1.75;
            --line-height-heading: 1.15;

            --color-background: #FFFFFF;
            --color-surface: #F8F8F8;
            --color-primary: #111111;
            --color-secondary: #444444;
            --color-muted: #777777;
            --color-accent-warm: #F0EDE8;
            --color-white: #FFFFFF;
            --color-black: #000000;
            --color-border: #D8D8D8;

            --space-sm: 1rem;
            --space-md: 1.5rem;
            --space-lg: 3rem;
            --space-xl: 5rem;
            --space-xxl: 7rem;

            --border-radius-md: 8px;
            --border-radius-lg: 12px;
            --border-width: 1px;
            --border-width-thick: 2px;

            --shadow-md: 0 4px 15px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 8px 25px rgba(0, 0, 0, 0.08);
            --shadow-xl: 0 12px 35px rgba(0, 0, 0, 0.10);

            --transition-medium: 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            --animation-duration-fold: 0.8s;
            --animation-easing-fold: cubic-bezier(0.34, 1.56, 0.64, 1);
            
            --t-fast: 0.3s;
            --t-med: 0.5s;
            --t-slow: 0.8s;
            --sh-soft: 0 4px 15px rgba(0, 0, 0, 0.05);
            --sh-medium: 0 8px 30px rgba(0, 0, 0, 0.07);
            --sh-hard: 0 12px 45px rgba(0, 0, 0, 0.1);
        }

        /* ==========================================================================
           2) DOOR LOADER STYLES (FIXED - Matches index.html)
           ========================================================================== */
        
        .door-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9999;
            pointer-events: none;
            display: flex;
            align-items: center;
            justify-content: center;
            visibility: visible; 
            opacity: 1;
            transition: visibility 0s 1.5s, opacity 0.5s 1s ease;
        }
        .door { /* Renamed from .door-panel */
            position: absolute;
            top: 0;
            height: 100vh;
            width: 50.5vw;
            background: var(--color-primary);
            transition: transform 1.2s cubic-bezier(0.86, 0, 0.07, 1);
            transform: translateX(0);
        }
        .door.left { left: 0; }
        .door.right { right: 0; }
        .door-logo {
            color: var(--color-white); 
            font-family: var(--font-display);
            font-size: clamp(2rem, 6vw, 3.5rem); 
            font-weight: 700;
            letter-spacing: 1px; 
            z-index: 10000; 
            opacity: 0; /* Start hidden */
            transform: scale(0.9);
            transition: opacity 0.5s ease 0.5s, transform 0.5s ease 0.5s;
            position: relative;
            text-align: center; 
            padding: 0 1rem;
        }
        
        /* JS Triggers */
        body.intro-active .door-logo {
            opacity: 1;
            transform: scale(1);
        }
        body.intro-active .door { /* Use .door */
            transform: translateX(0);
        }
        
        body.intro-done .door.left { transform: translateX(-100%); }
        body.intro-done .door.right { transform: translateX(100%); }
        body.intro-done .door-logo { 
            opacity: 0; 
            transform: scale(1.1);
            transition-duration: 0.4s;
            transition-delay: 0s;
        }
        
        .door-overlay.hidden { 
            opacity: 0; 
            visibility: hidden; 
            display: none; 
        }


        /* ==========================================================================
           3) GLOBAL RESETS & BASE STYLES
           ========================================================================== */
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; font-size: var(--font-size-base); }
        body {
            font-family: var(--font-main); background-color: var(--color-background);
            color: var(--color-secondary); line-height: var(--line-height-base);
            -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden; 
            /* === HEADER HEIGHT CHANGE === */
            padding-top: 170px; /* Was 80px */
            /* === END CHANGE === */
        }
        .body-nav-open { overflow: hidden; }

        h1, h2, h3, h4 {
            font-family: var(--font-display); /* Now Montserrat */
            /* === COLOR CHANGE: Headers Blue === */
            color: var(--accent-blue); /* Was --color-primary */
            /* === END CHANGE === */
            font-weight: 700; line-height: var(--line-height-heading);
            margin-bottom: var(--space-md); letter-spacing: -0.03em;
        }
        h1 { font-size: clamp(3rem, 8vw, 6rem); }
        h2 { font-size: clamp(2.2rem, 5vw, 3.2rem); margin-bottom: var(--space-lg); }
        h3 { font-size: clamp(1.6rem, 4vw, 2.2rem); }
        h4 { font-size: 1.3rem; font-weight: 600; margin-bottom: var(--space-sm); }
        p { margin-bottom: var(--space-md); max-width: 65ch; font-size: 1.05rem; }
        p:last-of-type { margin-bottom: 0; }
        a { color: var(--color-primary); text-decoration: none; transition: color 0.2s ease; }
        
        /* === COLOR CHANGE: Hover Blue === */
        a:hover { color: var(--accent-blue); } /* Was --color-muted */
        /* === END CHANGE === */
        
        img { max-width: 100%; height: auto; display: block; vertical-align: middle; }
        ul { list-style: none; }
        .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0; }

        /* ==========================================================================
           4) LAYOUT & SHARED COMPONENTS
           ========================================================================== */
        .container {
            width: 90%; max-width: 1100px; margin-left: auto; margin-right: auto;
            padding-left: var(--space-md); padding-right: var(--space-md);
        }
        .container-narrow {
            width: 90%; max-width: 800px; margin-left: auto; margin-right: auto;
            padding-left: var(--space-md); padding-right: var(--space-md);
        }
        .section {
            padding: var(--space-xl) 0; position: relative; overflow: hidden;
        }
        .section-surface { background-color: var(--color-surface); }

        .section-heading {
            text-align: center; margin-bottom: var(--space-xl); max-width: 700px;
            margin-left: auto; margin-right: auto;
        }
        .section-heading .subheading {
            display: block; font-size: 0.9rem; font-weight: 600; color: var(--color-muted);
            text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: var(--space-sm); /* Adjusted variable */
        }

        /* ==========================================================================
           5) HEADER / NAVIGATION
           ========================================================================== */
        .main-header {
            position: fixed; top: 0; left: 0; width: 100%;
            z-index: 100;
            /* === HEADER TRANSPARENT === */
            background-color: transparent;
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
            box-shadow: none; 
            /* === END CHANGE === */
            padding: var(--space-sm) 0;
            transition: padding 0.3s ease, transform 0.3s ease; 
            /* === HEADER HEIGHT CHANGE === */
            height: 170px; /* Was 80px */
            /* === END CHANGE === */
        }
        .main-header.is-hidden { transform: translateY(-100%); }
        .main-header.scrolled { padding: calc(var(--space-sm) / 1.5) 0; }
        .main-header .container { 
            display: flex; justify-content: space-between; align-items: center; 
            height: 100%; width: 100%; max-width: 1100px; padding: 0 var(--space-md); 
        }
        
        /* === LOGO CSS CHANGE === */
        .logo { 
            display: flex; 
            align-items: center; 
            height: 100%; 
            padding: 0; 
            z-index: 101; 
            transition: filter 0.3s ease; 
            will-change: filter;
        }
        
        .logo img {
            height: 150px; /* LOGO HEIGHT */
            width: 150px;  /* LOGO WIDTH */
            display: block;
            border-radius: 50%;
            object-fit: cover;
        }
        /* === END LOGO CSS CHANGE === */
        
        .main-header + nav {
            position: fixed; top: 0; right: var(--space-md); 
            /* === HEADER HEIGHT CHANGE === */
            height: 170px; /* Was 80px */
            /* === END CHANGE === */
            z-index: 101; 
            display: flex; align-items: center;
        }
        .nav-list { display: flex; gap: 2.8rem; list-style: none; }
        .nav-link { 
            font-family: var(--font-main); font-weight: 500; font-size: 1rem; 
            padding-bottom: 0.5rem; position: relative; color: var(--color-secondary); 
            text-shadow: none; transition: color var(--transition-medium); 
        }
        
        /* === COLOR CHANGE: Hover Blue === */
        .nav-link:hover { color: var(--accent-blue); } /* Was --color-primary */
        /* === END CHANGE === */
        
        .nav-link.active { font-weight: 600; color: var(--color-primary); }
        .nav-link::after { 
            content: ""; position: absolute; left: 0; bottom: 0; height: 2px; width: 100%; 
            background-color: var(--accent-teal); /* Kept underline teal */
            transform: scaleX(0); transform-origin: center; 
            transition: transform var(--transition-medium); 
        }
        .nav-link:hover::after, .nav-link.active::after { transform: scaleX(0.7); }
        
        /* --- Mobile Nav Toggle (Doors) --- */
        .mobile-nav-toggle {
            display: none; 
            position: relative;
            width: 2.2rem;
            height: 2rem;
            background: transparent;
            border: none;
            cursor: pointer;
            z-index: 1001; 
        }
        .hamburger-bar {
            display: block;
            position: absolute;
            width: 100%;
            height: 3px; 
            background-color: var(--color-primary);
            border-radius: 3px;
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out, background-color 0.3s ease;
            left: 0; 
        }
        .hamburger-bar:nth-child(2) { top: 0; }
        .hamburger-bar:nth-child(3) { top: 50%; transform: translateY(-50%); }
        .hamburger-bar:nth-child(4) { bottom: 0; }
        .mobile-nav-toggle[aria-expanded="true"] .hamburger-bar:nth-child(2) {
            transform: translateY(11px) rotate(45deg); 
        }
        .mobile-nav-toggle[aria-expanded="true"] .hamburger-bar:nth-child(3) {
            opacity: 0;
        }
        .mobile-nav-toggle[aria-expanded="true"] .hamburger-bar:nth-child(4) {
            transform: translateY(-11px) rotate(-45deg); 
        }
        
        @media (max-width: 768px) {
            .mobile-nav-toggle {
                display: block;
            }
            .main-header + nav {
                position: fixed;
                inset: 0; 
                height: 100%; 
                right: 0; 
                z-index: 1000;
                background-color: var(--color-primary); 
                transform: translateX(100%);
                transition: transform 0.4s cubic-bezier(0.77, 0, 0.175, 1);
                display: flex; 
                justify-content: center; 
                align-items: center;
            }
            .main-header + nav:has(ul[data-visible="true"]) { 
                transform: translateX(0%); 
            }
            .nav-list {
                flex-direction: column; 
                gap: var(--space-lg); 
                height: 100%;
                justify-content: center; 
                align-items: center;
            }
            .nav-link {
                color: var(--color-white); 
                font-size: clamp(1.8rem, 5vw, 2.5rem); 
                font-weight: 600;
                opacity: 0.8;
                padding-bottom: 0.8rem;
            }
            .nav-link:hover,
            .nav-link.active {
                opacity: 1;
            }
            .nav-link::after {
                background-color: var(--color-white);
            }
        }
        
        .body-nav-open .logo {
            filter: invert(1);
        }
        .body-nav-open .hamburger-bar { 
            background-color: var(--color-white); 
        }

        /* ==========================================================================
           6) CONTACT PAGE SECTIONS
           ========================================================================== */

        .contact-hero {
            background-color: #F0F0F0;
            text-align: center;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: var(--space-lg) 0;
            /* === HEADER HEIGHT CHANGE === */
            margin-top: -170px; /* Was -80px */
            /* === END CHANGE === */
        }
        .hero-title-box {
            display: inline-block; background-color: var(--color-primary);
            padding: var(--space-md) var(--space-lg); border-radius: var(--border-radius-md);
            margin: 0 auto; box-shadow: var(--shadow-xl);
            position: relative; z-index: 1;
            opacity: 0;
            transition-property: opacity, transform;
            transition-duration: var(--animation-duration-fold);
            transition-timing-function: var(--animation-easing-fold);
            will-change: opacity, transform;
            transform: perspective(1000px) rotateX(-90deg);
            transform-origin: top center;
            text-align: center;
        }
        .hero-title-box.is-visible {
             opacity: 1; transform: perspective(1000px) rotateX(0deg);
        }
        .contact-hero h1 {
            color: var(--color-white); margin-bottom: 0; text-shadow: none;
        }

        .contact-form-wrapper {
            background: var(--color-background);
            padding: var(--space-lg);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-lg);
        }
        .contact-form .form-grid {
            display: grid; grid-template-columns: 1fr; gap: var(--space-md);
        }
        @media (min-width: 768px) {
            .contact-form .form-grid { grid-template-columns: 1fr 1fr; }
        }
        .form-group { width: 100%; }
        .form-group.full-width { grid-column: 1 / -1; }
        .form-label {
            display: block; margin-bottom: 0.5rem; font-size: 0.9rem;
            font-weight: 600; color: var(--color-secondary);
        }
        .form-input, .form-textarea, .form-select {
            width: 100%; padding: 1rem; font-family: var(--font-main);
            font-size: 1rem; color: var(--color-primary);
            background: var(--color-surface);
            border: var(--border-width) solid var(--color-border);
            border-radius: var(--border-radius-md);
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        .form-input:focus, .form-textarea:focus, .form-select:focus {
            outline: none; border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(17, 17, 17, 0.1);
        }
        .form-textarea { resize: vertical; min-height: 120px; }
        .form-actions { text-align: center; margin-top: var(--space-xl); }
        .btn {
            display: inline-block; padding: 1rem 2.5rem; background: var(--color-primary);
            color: var(--color-white); border: none; border-radius: var(--border-radius-md);
            font-family: var(--font-display); font-weight: 700; font-size: 1rem;
            cursor: pointer; text-decoration: none; text-transform: uppercase;
            letter-spacing: 0.5px; text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;
        }
        
        /* === COLOR CHANGE: Hover Blue === */
        .btn:hover {
            background: var(--accent-blue); /* Was #333 */
            transform: translateY(-3px); box-shadow: var(--shadow-md);
        }
        /* === END CHANGE === */

        .btn:disabled {
            background-color: var(--color-muted); cursor: not-allowed; transform: translateY(0);
        }
        #form-success-message { text-align: center; padding: var(--space-md) 0; }
        #form-success-message h2 { font-size: 1.8rem; }
        #form-success-message p { font-size: 1.1rem; color: var(--color-secondary); }

        @media (max-width: 768px) {
            .contact-form-wrapper {
                padding-left: var(--space-md);
                padding-right: var(--space-md);
            }
        }

        /* ==========================================================================
           7) FOOTER (Matches index.html)
           ========================================================================== */
        .main-footer {
            background-image: linear-gradient(to bottom, var(--text-primary), var(--accent-teal));
            color: rgba(255,255,255,0.7);
            padding: 80px 0 40px;
            font-size: 0.95rem;
        }
        .foot-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); 
            gap: var(--space-lg); 
            margin-bottom: var(--space-xl); 
        }
        .footer-col h4 { 
            font-family: var(--font-main); 
            color: var(--color-white); margin-bottom: var(--space-md); font-size: 1rem; 
            font-weight: 600; letter-spacing: 0.8px; text-transform: uppercase; 
        }
        .footer-col p { line-height: 1.6; margin-bottom: var(--space-sm); color: rgba(255,255,255,0.75);}
        .f-links { list-style: none; padding-left: 0; }
        .f-links li { margin-bottom: var(--space-sm); }
        .f-link { color: rgba(255,255,255,0.75); }
        .f-link:hover { color: var(--color-white); text-decoration: underline; }
        .social-links { display: flex; gap: var(--space-md); margin-top: var(--space-md); }
        .social-link svg { width: 24px; height: 24px; fill: currentColor; }
        .social-link { color: rgba(255,255,255,0.75); transition: color var(--transition-medium), transform 0.2s ease; }
        .social-link:hover { color: var(--color-white); transform: scale(1.1); }
        .foot-bottom { 
            border-top: 1px solid rgba(255,255,255,0.15); 
            text-align: center; padding-top: var(--space-md); margin-top: var(--space-xl); 
            font-size: 0.85rem; color: rgba(255,255,255,0.65); 
        }
        .foot-bottom a { color: rgba(255,255,255,0.65); }
        .foot-bottom a:hover { color: var(--color-white); }

        /* ==========================================================================
           8) ANIMATIONS
           ========================================================================== */
        .scroll-anim {
            opacity: 0;
            transition-property: opacity, transform;
            transition-duration: var(--animation-duration-fold); 
            transition-timing-function: var(--animation-easing-fold); 
            will-change: opacity, transform;
            transform: perspective(1000px) rotateX(-90deg);
            transform-origin: top center; 
        }
        .is-visible {
            opacity: 1; transform: perspective(1000px) rotateX(0deg); 
        }
        .delay-1 { transition-delay: 0.15s !important; }
        .delay-2 { transition-delay: 0.3s !important; }
        .delay-3 { transition-delay: 0.45s !important; }
        .delay-4 { transition-delay: 0.6s !important; }

    </style>
</head>
<body>

    <div class="door-overlay">
        <div class="door left"></div> <div class="door right"></div> <div class="door-logo">Contact Lush Crete</div>
    </div>
    <header class="header main-header" id="main-header">
        <div class="container">
            <a href="index.html" class="logo" aria-label="Lush Crete - Home">
                <img src="images/lushlogo.png" alt="Lush Crete Logo">
            </a>
            <button class="mobile-nav-toggle" id="mobile-nav-toggle" aria-controls="primary-navigation" aria-expanded="false">
                <span class="sr-only">Menu</span>
                <span class="hamburger-bar"></span>
                <span class="hamburger-bar"></span>
                <span class="hamburger-bar"></span>
            </button>
            
            <nav aria-label="Main Navigation">
                <ul class="nav-list" id="primary-navigation" data-visible="false">
                    <li><a class="nav-link" href="index.html">Home</a></li>
                    <li><a class="nav-link" href="services.html">Services</a></li>
                    <li><a class="nav-link" href="about.html">About</a></li>
                    <li><a class="nav-link active" href="contact.html" aria-current="page">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main id="main-content">

        <section class="section contact-hero" aria-labelledby="hero-heading">
            <div class="hero-title-box scroll-anim"> 
                <h1 id="hero-heading">Get in Touch.</h1>
            </div>
        </section>

        <section class="section section-surface" id="contact-form-section" aria-labelledby="contact-heading"> <div class="container">
            
            <div class="section-heading scroll-anim">
                <span class="subheading">Have a question?</span>
                <h2 id="contact-heading">We'd Love to Hear From You</h2>
                <p>Fill out the form below for a free, no-obligation quote and we'll get back to you as soon as possible.</p>
            </div>

            <div class="container-narrow">
                <div class="contact-form-wrapper scroll-anim delay-1">
                    
                    <form id="contact-form" action="https://formspree.io/f/xanpvgyk" method="POST" class="contact-form">

                        <div class="form-grid">
                            <div class="form-group">
                                <label for="name" class="form-label">Full Name</label>
                                <input type="text" id="name" name="name" class="form-input" required>
                            </div>

                            <div class="form-group">
                                <label for="email" class="form-label">Email Address</label>
                                <input type="email" id="email" name="_replyto" class="form-input" required>
                            </div>

                            <div class="form-group">
                                <label for="phone" class="form-label">Phone Number <span style="font-weight: 400; color: var(--color-muted);">(Optional)</span></label>
                                <input type="tel" id="phone" name="phone" class="form-input">
                            </div>

                            <div class="form-group">
                                <label for="service" class="form-label">Options</label> 
                                <select id="service" name="service" class="form-input form-select">
                                    <option value="">Please select...</option>
                                    <option value="Driveway">Driveway</option>
                                    <option value="Footpath">Footpath</option>
                                    <option value="Shed slab">Shed slab</option>
                                </select>
                            </div>
                            <div class="form-group full-width">
                                <label for="message" class="form-label">Your Message</label>
                                <textarea id="message" name="message" class="form-textarea" rows="6" placeholder="Tell us about your project..." required></textarea>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn">Send Message</button>
                        </div>
                    </form>

                    <div id="form-status-message" style="display: none;"></div>

                </div>
            </div>
        </div>
    </section>

    </main>

    <footer class="main-footer"> <div class="container">
            <div class="foot-grid">
                 <div class="footer-col scroll-anim delay-1"> 
                    <h4>Navigate</h4>
                    <ul class="f-links">
                        <li><a class="f-link" href="index.html">Home</a></li>
                        <li><a class="f-link" href="services.html">Services</a></li>
                        <li><a class="f-link" href="about.html">About Us</a></li>
                        <li><a class="f-link" href="contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-col scroll-anim delay-2"> 
                    <h4>Contact</h4>
                    <ul class="f-links">
                        <li><a class="f-link" href="mailto:info@lushcrete.com.au">info@lushcrete.com.au</a></li>
                        <li><a class="f-link" href="tel:0400000000">0400 000 000</a></li>
                    </ul>
                </div>
                 <div class="footer-col scroll-anim delay-3"> 
                    <h4>Connect</h4>
                    <ul class="f-links">
                        <li><a class="f-link" href="https://www.instagram.com/lushcrete/" target="_blank">Instagram</a></li>
                        </ul>
                     <div class="social-links">
                         <a href="https://www.instagram.com/lushcrete/" class="social-link" aria-label="Instagram" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg></a>
                         </div>
                </div>
            </div>
            <div class="foot-bottom scroll-anim delay-4">
                &copy; <span id="current-year"></span> Lush Crete. All Rights Reserved.
            </div>
        </div>
    </footer>
    <script>
        function debounce(func, wait = 10, immediate = false) {
            let timeout;
            return function executedFunction() {
                const context = this, args = arguments;
                const later = function() { timeout = null; if (!immediate) func.apply(context, args); };
                const callNow = immediate && !timeout;
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
                if (callNow) func.apply(context, args);
            };
        }

        document.addEventListener('DOMContentLoaded', () => {
            const body = document.body;
            
            // --- DOOR LOADER (FIXED - Matches index.html) ---
            const doorOverlay = document.querySelector('.door-overlay'); // Corrected selector
            if (doorOverlay) {
                body.style.overflow = 'hidden'; // Prevent scrolling during animation
                // Add 'intro-active' slightly after load to trigger transition
                setTimeout(() => {
                    body.classList.add('intro-active');
                }, 100); 

                // Add 'intro-done' to slide doors
                setTimeout(() => {
                    body.classList.add('intro-done');
                }, 2200);

                // Hide loader completely after animation + buffer
                setTimeout(() => {
                    doorOverlay.classList.add('hidden');
                    body.style.overflow = ''; // Restore scrolling
                }, 2600); 
            } else {
                console.warn("Door overlay element '.door-overlay' not found.");
                 body.style.overflow = ''; // Ensure scrolling
            }
            // --- END DOOR LOADER ---

            // --- SCROLL ANIMATIONS ---
            const heroBox = document.querySelector('.hero-title-box');
            if (heroBox) {
                // Delay hero animation until *after* door animation
                setTimeout(() => {
                    heroBox.classList.add('is-visible');
                    // Add scroll-anim class here if it wasn't added in HTML
                    if (!heroBox.classList.contains('scroll-anim')) {
                        heroBox.classList.add('scroll-anim');
                    }
                }, 1600); // Should start slightly after loader is hidden
            } else {
                 console.warn("Hero title box '.hero-title-box' not found for delayed animation.");
            }

            const scrollFoldElements = document.querySelectorAll('.scroll-anim:not(.hero-title-box)');
            if (scrollFoldElements.length > 0 && 'IntersectionObserver' in window) {
                const observer = new IntersectionObserver((entries, observerInstance) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('is-visible');
                            observerInstance.unobserve(entry.target);
                        }
                    });
                }, { rootMargin: '0px 0px -15% 0px', threshold: 0.05 });
                scrollFoldElements.forEach(el => observer.observe(el));
            } else {
                // Fallback for older browsers or if observer fails
                scrollFoldElements.forEach(el => el.classList.add('is-visible'));
            }
            
            // --- HEADER LOGIC ---
            const header = document.getElementById('main-header');
            if (header) {
                const setBodyPadding = () => { document.body.style.paddingTop = header.offsetHeight + 'px'; };
                setBodyPadding();
                window.addEventListener('resize', debounce(setBodyPadding, 50));

                let lastScrollTop = 0;
                const handleScroll = () => {
                    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                    header.classList.toggle('scrolled', scrollTop > 10);
                    if (scrollTop > lastScrollTop && scrollTop > header.offsetHeight) {
                        header.classList.add('is-hidden');
                    } else {
                        header.classList.remove('is-hidden');
                    }
                    lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
                };
                window.addEventListener('scroll', debounce(handleScroll, 5), { passive: true });
            }

            // --- MOBILE NAV TOGGLE ---
            const mobileNavToggle = document.getElementById('mobile-nav-toggle');
            const primaryNav = document.getElementById('primary-navigation');
            if (mobileNavToggle && primaryNav) {
                mobileNavToggle.addEventListener('click', () => {
                    const isVisible = primaryNav.getAttribute('data-visible') === 'true';
                    primaryNav.setAttribute('data-visible', !isVisible);
                    mobileNavToggle.setAttribute('aria-expanded', !isVisible);
                    body.classList.toggle('body-nav-open');
                });
            }

            // --- FOOTER YEAR ---
            const yearSpan = document.getElementById('current-year');
            if (yearSpan) {
                yearSpan.textContent = new Date().getFullYear();
            }

            // --- AJAX FORM SUBMISSION ---
            const contactForm = document.getElementById('contact-form');
            const statusMessageDiv = document.getElementById('form-status-message');

            async function handleFormSubmit(event) {
                event.preventDefault();
                const form = event.target;
                const data = new FormData(form);
                const button = form.querySelector('.btn');

                button.disabled = true;
                button.textContent = 'Sending...';
                statusMessageDiv.style.display = 'none';

                try {
                    const response = await fetch(form.action, {
                        method: form.method,
                        body: data,
                        headers: { 'Accept': 'application/json' }
                    });

                    if (response.ok) {
                        form.style.display = 'none';
                        statusMessageDiv.innerHTML = `
                            <div id="form-success-message" style="text-align: center;">
                                <h2>Thanks!</h2>
                                <p>Your message has been sent successfully. We'll get back to you soon.</p>
                            </div>
                        `;
                        statusMessageDiv.style.display = 'block';
                    } else {
                        // Attempt to get error details if possible
                        response.json().then(data => {
                            if (Object.hasOwn(data, 'errors')) {
                                statusMessageDiv.innerHTML = data["errors"].map(error => error["message"]).join(", ");
                            } else {
                                statusMessageDiv.innerHTML = "<p style='color: red; font-weight: 600; text-align: center;'>Oops! There was a problem submitting your form</p>";
                            }
                        }).catch(error => {
                             statusMessageDiv.innerHTML = "<p style='color: red; font-weight: 600; text-align: center;'>Oops! There was a problem submitting your form</p>";
                        });
                        statusMessageDiv.style.display = 'block';
                         button.disabled = false;
                         button.textContent = 'Send Message';
                    }
                } catch (error) {
                    statusMessageDiv.innerHTML = `
                        <p style="color: red; font-weight: 600; text-align: center;">
                            Oops! There was a problem. Please try again later.
                        </p>
                    `;
                    statusMessageDiv.style.display = 'block';
                    button.disabled = false;
                    button.textContent = 'Send Message';
                }
            }

            if (contactForm) {
                contactForm.addEventListener('submit', handleFormSubmit);
            }
        });
    </script>

</body>
</html>